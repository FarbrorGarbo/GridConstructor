{"version":3,"sources":["GCEngine.ts","GCView.tsx","App.tsx","index.tsx"],"names":["_settings","_degrees_to_radians","degrees","Math","PI","this","_getInitialSettings","rotation","elevation","distance","picturePlane","offsetH","offsetV","settings","point","rot","elev","n","x","sin","y","cos","a","b","z","c","H","V","h","v","GridConstructor","canvasElm","React","useRef","useState","width","window","innerWidth","height","innerHeight","canvasSize","setCanvasSize","useEffect","canvas","current","ctx","getContext","clearRect","strokeStyle","forEach","line","calcPointA","GCEngine","project","calcPointB","beginPath","moveTo","lineTo","stroke","onResize","addEventListener","removeEventListener","className","ref","GenericNumberInput","props","inputRef","value","setValue","returnValue","label","type","min","max","step","onChange","newValue","parseInt","updateValue","toString","App","initial","localStorageData","localStorage","getItem","JSON","parse","readSettings","floor","showSettings","toggle","setRotation","setElevation","setDistance","setPicturePlane","setOffsetH","setOffsetV","setItem","stringify","GCView","onClick","event","preventDefault","val","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3bcb9c6c.chunk.js","sourcesContent":["// The GridConstructor 3d engine\r\n\r\nclass GCEngine {\r\n    private _settings: Settings;\r\n\r\n    constructor () {\r\n        this._settings = this._getInitialSettings();\r\n    }\r\n\r\n    private _getInitialSettings () : Settings {\r\n        return {\r\n            rotation: 0,\r\n            elevation: 0,\r\n            distance: 1000,\r\n            picturePlane: 1000,\r\n            offsetH: 500,\r\n            offsetV: 500\r\n        }\r\n    }\r\n\r\n    private _degrees_to_radians = (degrees: number) => {\r\n      return degrees * (Math.PI / 180);\r\n    }\r\n\r\n    public project (settings: Settings = this._settings, point: Vec) : Point {\r\n        const rot = this._degrees_to_radians(settings.rotation);\r\n        const elev = this._degrees_to_radians(settings.elevation);\r\n        const n = point.x * Math.sin(rot) + point.y * Math.cos(rot);\r\n        const a = point.x * Math.cos(rot) - point.y * Math.sin(rot);\r\n        const b = n * Math.cos(elev) - point.z * Math.sin(elev);\r\n        const c = n * Math.sin(elev) + point.z * Math.cos(elev);\r\n        const H = settings.picturePlane * a / (settings.distance + b) + settings.offsetH;\r\n        const V = settings.picturePlane * c / (settings.distance + b) + settings.offsetV;\r\n        return {h: H, v: V};\r\n    }\r\n}\r\n\r\nexport type Settings = {\r\n    rotation: number,\r\n    elevation: number,\r\n    distance: number,\r\n    picturePlane: number,\r\n    offsetH: number,\r\n    offsetV: number\r\n};\r\n\r\nexport type Vec = {\r\n    x: number,\r\n    y: number,\r\n    z: number\r\n};\r\n\r\nexport type Point = {\r\n    h: number,\r\n    v: number\r\n};\r\n\r\nexport type Line = {\r\n    start: Vec,\r\n    end: Vec\r\n};\r\n\r\nexport default new GCEngine ();\r\n","import React from \"react\";\r\nimport GCEngine, { Settings } from \"./GCEngine\";\r\n\r\ntype ViewProps = {\r\n    settings: Settings\r\n}\r\n\r\nconst GridConstructor: React.FC<ViewProps> = ({ settings }: ViewProps) => {\r\n\tconst canvasElm = React.useRef<HTMLCanvasElement>(null);\r\n\tconst [canvasSize, setCanvasSize] = React.useState({width: window.innerWidth, height: window.innerHeight});\r\n\t\r\n\tReact.useEffect(() => {\r\n\t\tconst canvas = canvasElm.current;\r\n\t\t// console.log(settings);\r\n\r\n\t\tif (canvas) {\r\n\t\t\tcanvas.width = canvasSize.width;\r\n\t\t\tcanvas.height = canvasSize.height;\r\n\r\n\t\t\tconst ctx = canvas.getContext(\"2d\");\r\n\t\t\tif (!!ctx) {\r\n\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\t\t\tctx.strokeStyle = \"#f00\";\r\n\r\n\t\t\t\tconst xLines = [\r\n\t\t\t\t\t[{x:0, y:0, z:0}, {x:500, y:0, z:0}],\r\n\t\t\t\t\t[{x:480, y:0, z:5}, {x:500, y:0, z:0}]\r\n\t\t\t\t]\r\n\t\t\t\txLines.forEach(line => {\r\n\t\t\t\t\tconst calcPointA = GCEngine.project(settings, line[0]);\r\n\t\t\t\t\tconst calcPointB = GCEngine.project(settings, line[1]);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(calcPointA.h, canvas.height - calcPointA.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tctx.strokeStyle = \"#0f0\";\r\n\t\t\t\tconst yLines = [\r\n\t\t\t\t\t[{x:0, y:0, z:0}, {x:0, y:500, z:0}],\r\n\t\t\t\t\t[{x:5, y:480, z:0}, {x:0, y:500, z:0}]\r\n\t\t\t\t]\r\n\t\t\t\tyLines.forEach(line => {\r\n\t\t\t\t\tconst calcPointA = GCEngine.project(settings, line[0]);\r\n\t\t\t\t\tconst calcPointB = GCEngine.project(settings, line[1]);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(calcPointA.h, canvas.height - calcPointA.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tctx.strokeStyle = \"#00f\";\r\n\t\t\t\tconst zLines = [\r\n\t\t\t\t\t[{x:0, y:0, z:0}, {x:0, y:0, z:500}],\r\n\t\t\t\t\t[{x:5, y:0, z:480}, {x:0, y:0, z:500}]\r\n\t\t\t\t]\r\n\t\t\t\tzLines.forEach(line => {\r\n\t\t\t\t\tconst calcPointA = GCEngine.project(settings, line[0]);\r\n\t\t\t\t\tconst calcPointB = GCEngine.project(settings, line[1]);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(calcPointA.h, canvas.height - calcPointA.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tctx.strokeStyle = \"#aaa\";\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tconst cubeLines = [\r\n\t\t\t\t\t[{x:-200, y:-200, z:-200}, {x:200, y:-200, z:-200}],\r\n\t\t\t\t\t[{x:-200, y:200, z:-200}, {x:200, y:200, z:-200}],\r\n\t\t\t\t\t[{x:-200, y:-200, z:200}, {x:200, y:-200, z:200}],\r\n\t\t\t\t\t[{x:-200, y:200, z:200}, {x:200, y:200, z:200}],\r\n\r\n\t\t\t\t\t[{x:-200, y:-200, z:-200}, {x:-200, y:-200, z:200}],\r\n\t\t\t\t\t[{x:200, y:-200, z:-200}, {x:200, y:-200, z:200}],\r\n\t\t\t\t\t[{x:200, y:200, z:-200}, {x:200, y:200, z:200}],\r\n\t\t\t\t\t[{x:-200, y:200, z:-200}, {x:-200, y:200, z:200}],\r\n\t\t\t\t\t\r\n\t\t\t\t\t[{x:-200, y:-200, z:200}, {x:-200, y:200, z:200}],\r\n\t\t\t\t\t[{x:200, y:-200, z:200}, {x:200, y:200, z:200}],\r\n\t\t\t\t\t[{x:-200, y:-200, z:-200}, {x:-200, y:200, z:-200}],\r\n\t\t\t\t\t[{x:200, y:-200, z:-200}, {x:200, y:200, z:-200}]\r\n\t\t\t\t]\r\n\t\t\t\tcubeLines.forEach(line => {\r\n\t\t\t\t\tconst calcPointA = GCEngine.project(settings, line[0]);\r\n\t\t\t\t\tconst calcPointB = GCEngine.project(settings, line[1]);\r\n\t\t\t\t\tctx.moveTo(calcPointA.h, canvas.height - calcPointA.v);\r\n\t\t\t\t\tctx.lineTo(calcPointB.h, canvas.height - calcPointB.v);\r\n\t\t\t\t});\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst onResize = () => {\r\n\t\t\tsetCanvasSize({width: window.innerWidth, height: window.innerHeight});\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('resize', onResize);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', onResize);\r\n\t\t}\r\n\t},\r\n\t[settings, canvasSize]\r\n\t);\r\n\r\n  \treturn (\r\n\t\t<canvas className={\"canvas\"} ref={canvasElm} />\r\n  \t);\r\n}\r\n\r\nexport default GridConstructor;\r\n","import React from \"react\";\nimport { Settings } from \"./GCEngine\";\nimport GCView from \"./GCView\";\nimport \"./App.css\";\n\nconst readSettings = (initial: Settings) => {\n\tconst localStorageData: string | null = localStorage.getItem(\"grid\");\n\n\tconst value = !localStorageData\n\t\t\t? initial\n\t\t\t: JSON.parse(localStorageData);\n\n\treturn value;\n}\n\ntype GenericNumberInputProps = {\n\tlabel: string;\n\tmin: number;\n\tmax: number;\n\tstep: number;\n\tvalue: number;\n\treturnValue(val: number): void;\n}\n\nconst GenericNumberInput: React.FC<GenericNumberInputProps> = (props) => {\n\tconst inputRef = React.useRef<HTMLInputElement>(null);\n\tconst [value, setValue] = React.useState(props.value);\n\n\tconst updateValue = () => {\n\t\tlet  newValue = parseInt(inputRef.current!.value === \"\" ? \"0\" : inputRef.current!.value);\n\t\tif (newValue < props.min) newValue = props.min;\n\t\telse if (newValue > props.max) newValue = props.max;\n\t\tsetValue(newValue);\n\t}\n\n\tconst {returnValue} = props;\n\n\tReact.useEffect( () => { returnValue(value) }, [returnValue, value] );\n\n\treturn (\n\t\t<label>{props.label}:\n\t\t\t<input\n\t\t\t\tref={inputRef}\n\t\t\t\ttype=\"number\"\n\t\t\t\tmin={props.min}\n\t\t\t\tmax={props.max}\n\t\t\t\tstep={props.step}\n\t\t\t\tonChange={() => updateValue()}\n\t\t\t\tvalue={value.toString()}\n\t\t\t/>\n\t\t</label>\n\t);\n}\n\nconst App: React.FC = () => {\n\t// Load settings\n\tconst settings: Settings = readSettings(\n\t\t{\n\t\t\trotation: 0,\n\t\t\televation: 0,\n\t\t\tdistance: 1000,\n\t\t\tpicturePlane: 1000,\n\t\t\toffsetH: Math.floor(window.innerWidth/2),\n\t\t\toffsetV: Math.floor(window.innerHeight/2)\n\t\t}\n\t);\n\n\t// Show/hide settings\n\tconst [showSettings, toggle] = React.useState(false);\n\n\tfunction toggleSettings (event: any) {\n\t\tevent.preventDefault();\n\t\ttoggle(!showSettings);\n\t}\n\n\t// Settings\n\tconst [rotation, setRotation] = React.useState( settings.rotation );\n\tconst [elevation, setElevation] = React.useState( settings.elevation );\n\tconst [distance, setDistance] = React.useState( settings.distance );\n\tconst [picturePlane, setPicturePlane] = React.useState( settings.picturePlane);\n\tconst [offsetH, setOffsetH] = React.useState( settings.offsetH );\n\tconst [offsetV, setOffsetV] = React.useState( settings.offsetV );\n\n\tconst handleRotation = (value: number) => { setRotation(value) };\n\tconst handleElevation = (value: number) => { setElevation(value) };\n\tconst handleDistance = (value: number) => { setDistance(value) };\n\tconst handlePicturePlane = (value: number) => { setPicturePlane(value) };\n\tconst handleOffsetH = (value: number) => { setOffsetH(value) };\n\tconst handleOffsetV = (value: number) => { setOffsetV(value) };\n\n\tReact.useEffect(\n\t\t() => { \n\t\t\tlocalStorage.setItem(\"grid\", JSON.stringify(\n\t\t\t\t{\n\t\t\t\t\trotation: rotation,\n\t\t\t\t\televation: elevation,\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tpicturePlane: picturePlane,\n\t\t\t\t\toffsetH: offsetH,\n\t\t\t\t\toffsetV: offsetV\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\t\t[rotation, elevation, distance, picturePlane, offsetH, offsetV]\n\t);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<GCView settings={{rotation: rotation, elevation: elevation, distance: distance, picturePlane: picturePlane, offsetH: offsetH, offsetV: offsetV}} />\n\n\t\t\t<div className=\"menu\">\n\t\t\t\t<button onClick={toggleSettings}>{showSettings ? \"Back\" : \"Settings\"}</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t{showSettings &&\n\t\t\t<div className={\"settings\"}>\n\t\t\t\t<h2>Perspektive Settings</h2>\n\t\t\t\t<GenericNumberInput label={\"Rotation\"} min={0} max={359} step={5} value={rotation} returnValue={(val) => handleRotation(val)} />\n\t\t\t\t<GenericNumberInput label={\"Elevation\"} min={0} max={90} step={5} value={elevation} returnValue={(val) => handleElevation(val)} />\n\t\t\t\t<GenericNumberInput label={\"Distance\"} min={0} max={999999} step={50} value={distance} returnValue={(val) => handleDistance(val)} />\n\t\t\t\t<GenericNumberInput label={\"Distance to Picture Plane\"} min={0} max={999999} step={50} value={picturePlane} returnValue={(val) => handlePicturePlane(val)} />\n\t\t\t\t<GenericNumberInput label={\"Offset Horisontal\"} min={0} max={999999} step={5} value={offsetH} returnValue={(val) => handleOffsetH(val)} />\n\t\t\t\t<GenericNumberInput label={\"Offset Vertical\"} min={0} max={999999} step={5} value={offsetV} returnValue={(val) => handleOffsetV(val)} />\n\t\t\t</div>}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}